<script is:inline>
  const lightThemeClass = "latte";
  const darkThemeClass = "frappe";

  const theme = localStorage.getItem("theme");
  function isDarkMode() {
    return (
      theme === "dark" ||
      (!theme && window.matchMedia("(prefers-color-scheme: dark)").matches)
    );
  }
  function evalThemeSettings() {
    if (isDarkMode()) {
      document.documentElement.classList.remove(lightThemeClass);
      document.documentElement.classList.add(darkThemeClass);
    } else {
      document.documentElement.classList.remove(darkThemeClass);
      document.documentElement.classList.add(lightThemeClass);
    }
  }

  window
    .matchMedia("(prefers-color-scheme: dark)")
    .addEventListener("change", ({}) => {
      evalThemeSettings();
    });
  evalThemeSettings();
</script>
